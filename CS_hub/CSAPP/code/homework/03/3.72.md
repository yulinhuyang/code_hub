# 3.72

## A

s2 的 C 语言表达式为

```c
s2 = s1 - ((n * 8 + 30) & 0xFFFFFFF0)
```

s2 的数学表达式为

```text
当 n = 2*k-1 时， s2 = s1 - 8*n - 24  (公式 1)
当 n = 2*k 时，   s2 = s1 - 8*n - 16  (公式 2)
k = 1,2,3,...
```

由于 s2 + e2 + 8*n + e1 = s1，e1 + e2 的数学表达式，容易由 s2 的数学表达式推导出

```text
当 n = 2*k-1 时， e1 + e2 = 24       (公式 3)
当 n = 2*k 时，   e1 + e2 = 16       (公式 4)
k = 1,2,3,...
```

## B

p 的 C 语言表达式为

```c
p = (s2 + 0xF) & 0xFFFFFFF0
```

p 的数学表达式为

```text
p = (s2 + 15) - (s2 + 15)%16         (公式 5)
```

另外， e2 的数学表达式为

```text
e2 = p - s2 = 15 - (s2 + 15)%16      (公式 6)
```

## C

当 n 为奇数，即 n = 2*k-1 (k = 1,2,3,...) 时，由 (公式 3) 可知

```text
e1 = 24 - e2
     代入 (公式 6)
   = 24 - (15 - (s2+15)%16)
   = 9 + (s2+15) %16
     代入 (公式 1)
   = 9 + (s1 - 8*n - 24 + 15)%16
   = 9 + (s1 - 8*n - 9)%16
     代入 n = 2*k-1
   = 9 + (s1 - 8*(2*k-1) - 9)%16
   = 9 + (s1 - 16*k - 1)%16
     忽略 16*k
   = 9 + (s1 - 1)%16

当 s1 % 16 = 1 时， (s1 - 1)%16 =  0, e1 取最小值， e1 = 9
当 s1 % 16 = 0 时， (s1 - 1)%16 = 15, e1 取最大值， e1 = 24
```

当 n 为偶数，即 n = 2*k (k = 1,2,3,...) 时，由 (公式 4) 可知

```text
e1 = 16 - e2
     代入 (公式 6)
   = 16 - (15 - (s2+15)%16)
   = 1 + (s2+15) %16
     代入 (公式 2)
   = 1 + (s1 - 8*n - 16 + 15)%16
   = 1 + (s1 - 8*n - 1)%16
     代入 n = 2*k
   = 1 + (s1 - 8*(2*k) - 1)%16
   = 1 + (s1 - 16*k - 1)%16
     忽略 16*k
   = 1 + (s1 - 1)%16

当 s1 % 16 = 1 时， (s1 - 1)%16 =  0, e1 取最小值， e1 = 1
当 s1 % 16 = 0 时， (s1 - 1)%16 = 15, e1 取最大值， e1 = 15
```

综上所述

```text
当 n 为偶数， s1 % 16 = 1 时， e1 取最小值， e1 = 1
当 n 为奇数， s1 % 16 = 0 时， e1 取最大值， e1 = 24
```

## D

关于 p

```text
从 (公式 5) 可以看到 p 总是 16 的倍数。
```

关于 s2

```text
把 n = 2*k-1 代入 (公式 1)， 把 n = 2*k 代入 (公式 2) 可以得到同样的算式
s2 = s1 - 16*(k+1)
说明 s2 与 s1 总是相差 16*(k+1) 位
```